{
    "country_code": "fr",
    "country_code_list": ["fr","gf","gu","gp","mq","re","yt","bl","mf","pm"],
    "source_db":{
        "host":"patafix3.ign.fr",
        "port":"5432",
        "name":"bduni_france",
        "user":"invite",
        "pwd":"28de#",
        "schema": "public"
    },
    "source_srid": "CASE gcms_territoire WHEN 'FXX' THEN 2154 WHEN 'GLP' THEN 4559 WHEN 'GUF' THEN 2972 WHEN 'H_T' THEN 4326 WHEN 'MTQ' THEN 4559 WHEN 'MYT' THEN 4471 WHEN 'REU' THEN 2975 WHEN 'SPM' THEN 4467 END",
    "target_db":{
        "host":"10.128.35.60",
        "port":"5432",
        "name":"ome2_hvlsp_v2",
        "user":"postgres",
        "pwd":"postgres",
        "schema": "hy"
    },
    "target_srid": "3035",
    "target_country_field": "country",
    "target_tables": {
        "watercourse_link":{
            "mock": false,
            "source_tables":{
                "troncon_hydrographique": {
                    "mock": false,
                    "where": "NOT gcms_detruit",
                    "mapping": {
                        "country": { "function": "fr_country_code" },
                        "level": { "function": "fr_xx_vertical_position" },
                        "persistence": {
                            "eval": "'dry' if data['persistance'] == 'Sec' else 'ephemeral' if data['persistance'] == 'Ephémère' else 'intermittent' if data['persistance'] == 'Intermittent' else 'perennial' if data['persistance'] == 'Permanent' else 'void'"
                        },
                        "tidal": {"eval": "0 if not data['cpx_influence_de_la_maree'] else 1 if data['cpx_influence_de_la_maree'] else -32768"},
                        "flow": {"eval": "'both_directions' if data['sens_de_l_ecoulement'] == 'Double sens' else 'in_direction' if data['sens_de_l_ecoulement'] == 'Sens direct' else 'in_opposite_direction' if data['sens_de_l_ecoulement'] == 'Sens inverse' else 'void'"},
                        "hydro_identifier": {"eval": "data['cpx_code_hydrographique'] if data['cpx_code_hydrographique'] is not None else 'void'"},
                        "geographical_name": {"function": "fr_xx_name"},
                        "origin": {"eval": "'man_made' if data['origine'] == 'Artificielle' else 'natural' if data['origine'] like 'Naturelle%' else 'void'"},
                        "fictitious": {"eval": "0 if not data['fictif'] else 1 if data['fictif'] else -32768"},
                        "navigable": {"eval": "0 if not data['navigabilite'] else 1 if data['navigabilite'] else -32768"}
                    },
                    "geomapping":{
                        "geom": "geometrie"
                    },
                    "fetched_fields":[
                        "persistance",
                        "cpx_influence_de_la_maree",
                        "sens_de_l_ecoulement",
                        "cpx_code_hydrographique",
                        "origine",
                        "fictif",
                        "navigabilite",
                        "gcms_territoire",
                        "position_par_rapport_au_sol"
   
                    ]
                }
            }
        }
    }
}